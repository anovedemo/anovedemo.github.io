<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Signing in</title>
    <script src="/js/cache.js"></script>
</head>
<body>

<script>
  setTimeout(function(){
      const token = location.hash.split("#").at(-1)
                        .split("&").filter(x => x.startsWith("id_token=")).at(0)
                        .replace("id_token=","");
      const expires_in = location.hash.split("#").at(-1)
                            .split("&").filter(x => x.startsWith("expires_in=")).at(0)
                            .replace("expires_in=","");
      localStorage["token"] = token;
      cacheJS.set("token",token,parseInt(expires_in));
      var referer = "/";
      if (sessionStorage["prevLoc"]){
          referer = sessionStorage["prevLoc"];
          sessionStorage.removeItem("prevLoc");
      }
      location = referer;
  },1);
</script>
</body>
</html>